{%- extends "!search.html" %}

{% block body %}
<h1 id="search-documentation">{{ _('Search') }}</h1>

{% block scriptwarning %}
<noscript>
  <div class="admonition warning">
    <p>
      {% trans %}Please activate JavaScript to enable the search
      functionality.{% endtrans %}
    </p>
  </div>
</noscript>
{% endblock %}

{% block searchcomponent %}
<p>
  {% trans %}Searching for multiple words only shows matches that contain
  all words.{% endtrans %}
</p>
<div id="atsphinx-pagefind"></div>
<link href="{{ pathto('pagefind/pagefind-ui.css', 1) }}"
    rel="stylesheet">
<link href="{{ pathto('_static/atsphinx-pagefind/ui.css', 1) }}"
    rel="stylesheet">
<script src="{{ pathto('pagefind/pagefind-ui.js', 1) }}"></script>

<script>
  window.addEventListener('DOMContentLoaded', (event) => {
    const ui = new PagefindUI({element: "#atsphinx-pagefind", showSubResults: true});
    const query = new URLSearchParams(window.location.search).get("q");
    document
      .querySelectorAll('input[name="q"]')
      .forEach((el) => (el.value = query));
    if (query) ui.triggerSearch(query);
  });
</script>
{% endblock %}

{% endblock %}
